<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Stellarator-Tools: Testing Framework Documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="flux_surfaces.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Stellarator-Tools
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('testing.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Testing Framework Documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#testing_introduction">Introduction</a></li>
<li class="level1"><a href="#testing_unit_tests">Unit Tests</a></li>
<li class="level1"><a href="#testing_regression_tests">Regression Tests</a></li>
<li class="level1"><a href="#testing_cmake_framework">Cmake Test Framework</a></li>
<li class="level1"><a href="#testing_cmake_running">Running Tests</a><ul><li class="level2"><a href="#testing_cmake_results">Test Results</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>Overview of the testing framework.</p>
<h1><a class="anchor" id="testing_introduction"></a>
Introduction</h1>
<p>For any large software project, testing is a critical part of the development process. Regular code testing helps ensure that code is not only correct, but remains correct as pieces change. Testing of the V3FIT code is currently implemented at two levels. The unit testing level tests components at the function and subroutine levels. This ensures code correctness. Regression tests check the results of the code against expected values. Note that tests have only been setup for the new coding. If using the old coding version of V3FIT, tests are expected to fail.</p>
<h1><a class="anchor" id="testing_unit_tests"></a>
Unit Tests</h1>
<p>This tests are implemented at the module level. A module with unit testing capability should provide a *_test function. These tests should check each function and subroutine in the module against an analytic result. These tests are meant to test for correctness.</p>
<p>All unit tests are run in the <a class="el" href="v3fita_8f.html#a4ebe95c4aecd9fcd05033b53c61f2620">task_unit_tests</a> subroutine. Unit testing may be run by setting the <a class="el" href="namespacev3fit__input.html#a82ad8af4c6bd0f4070ef0f35b933a1ee">v3fit_input::my_task</a> variable to <code>unit_test</code> or by using the <code>-test</code> <a class="el" href="cl_parsing_sec.html">Command Line Arguments</a>.</p>
<h1><a class="anchor" id="testing_regression_tests"></a>
Regression Tests</h1>
<p>Regression tests run the code in full and check against expected results. These tests are make up of a collective of individual tests. Regression tests are typically setup where the first test check the sucessful operation of the code (ie. no segfault, crashes, etc...). Subsequent tests check individual pieces of the results against expected results.</p>
<p>It is not recommended to setup tests where a result file is checked against a "Good" file. These types of tests can lead to false positives due to changes in formatting of a file over the course of development or variations in code run. For instance, the recout file and runlog files contain the the execution time of V3FIT. This time will change depending a variy of factors.</p>
<h1><a class="anchor" id="testing_cmake_framework"></a>
Cmake Test Framework</h1>
<p>In the <a class="el" href="build_system.html">Stellarator-Tools Build System</a>, a task is setup in the make file to configure and run the tests. All tests can be found in the testing directory. In the testing directory there are a series of sub directories. The test_files directory contains files that are common to all tests. These files are copied to the test working directory when tests are configured. The test_utilities directory contains python scripts to test the results of files. The tests directory contains the actual tests.</p>
<p>In the tests directory, the various sub folders are the working directories for the tests. In each directory, the CMakeLists.txt contains the tests to run. A test is added to this file using the add_test command. Each test needs a unique name and a command. The test is deamed to pass if the exit code returned is zero.</p>
<h1><a class="anchor" id="testing_cmake_running"></a>
Running Tests</h1>
<p>Tests are run from the Cmake generated make file (see <a class="el" href="build_system.html#build_system_testing">Testing</a>) or by using the <code>ctest</code> command. Individual or ranges of tests maybe run by using the <code>ctest -R &amp;ltregex&amp;gt</code> command. As an example to run all the tests for diagnostic rotation use the command </p><div class="fragment"><div class="line">ctest -R ^diagnostic_rotation</div>
</div><!-- fragment --><h2><a class="anchor" id="testing_cmake_results"></a>
Test Results</h2>
<p>Test results are immidately displayed showing the result of the number of failed tests out of the total number of tests. Once tests have completed running, a directory called Temporary in the Testing directory is created. Inside this directory is a file listing the last tests that failed and the current log file for each test. When a test fails, it is encouraged to either check the log file for the reason the test crashed or run the test manually. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
